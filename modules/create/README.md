# Create Organization

Creates a new MongoDB Atlas organization with an initial programmatic API key.

Callers must pass two providers: the default provider (target org credentials) and `mongodbatlas.org_creator` (paying org credentials).

## Usage

```hcl
provider "mongodbatlas" {
  # Credentials for the new organization (target org).
  client_id     = module.atlas_org.client_id
  client_secret = module.atlas_org.client_secret
}

provider "mongodbatlas" {
  alias = "org_creator"
  # Credentials for the paying organization that owns the new org.
}

module "atlas_org" {
  source = "mongodb/organization/mongodbatlas//modules/create"

  providers = {
    mongodbatlas             = mongodbatlas
    mongodbatlas.org_creator = mongodbatlas.org_creator
  }

  name         = "my-new-org"
  org_owner_id = var.user_id
  description  = "Terraform managed API key"
  role_names   = ["ORG_OWNER"]

  resource_policies = {
    block_wildcard_ip          = true
    require_maintenance_window = true
  }
}
```

<!-- BEGIN_TF_DOCS -->
<!-- @generated
WARNING: This section is auto-generated by terraform-docs. Do not edit directly.
Changes will be overwritten when documentation is regenerated.
Run 'just docs' to regenerate.
-->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>= 1.9)

- <a name="requirement_mongodbatlas"></a> [mongodbatlas](#requirement\_mongodbatlas) (~> 2.7)

## Providers

The following providers are used by this module:

- <a name="provider_mongodbatlas.org_creator"></a> [mongodbatlas.org\_creator](#provider\_mongodbatlas.org\_creator) (~> 2.7)

## Resources

The following resources are used by this module:

- [mongodbatlas_organization.this](https://registry.terraform.io/providers/mongodb/mongodbatlas/latest/docs/resources/organization) (resource)

<!-- BEGIN_TF_INPUTS_RAW -->
<!-- @generated
WARNING: Inputs section below is processed and grouped by generate_inputs_from_readme.py. Do not edit directly.
Changes will be overwritten when documentation is regenerated.
-->
## Required Inputs

The following input variables are required:

### <a name="input_name"></a> [name](#input\_name)

Description: Name of the organization.

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_description"></a> [description](#input\_description)

Description: Description for the initial programmatic API key created with the organization. Required for new organizations, ignored on import.

Type: `string`

Default: `null`

### <a name="input_federation_settings_id"></a> [federation\_settings\_id](#input\_federation\_settings\_id)

Description: Federation ID to link the new organization to. Cannot be updated after creation.

Type: `string`

Default: `null`

### <a name="input_org_owner_id"></a> [org\_owner\_id](#input\_org\_owner\_id)

Description: Atlas user ID to assign as Organization Owner. Required for new organizations, ignored on import.

Type: `string`

Default: `null`

### <a name="input_organization_settings"></a> [organization\_settings](#input\_organization\_settings)

Description: Organization settings to configure on the new organization. Secure-by-default: multi\_factor\_auth\_required and restrict\_employee\_access default to true.

Type:

```hcl
object({
    api_access_list_required   = optional(bool)
    multi_factor_auth_required = optional(bool, true)
    restrict_employee_access   = optional(bool, true)
    gen_ai_features_enabled    = optional(bool)
    security_contact           = optional(string)
  })
```

Default: `null`

### <a name="input_resource_policies"></a> [resource\_policies](#input\_resource\_policies)

Description: Resource policy configuration. When set, the resource\_policy submodule is enabled. All policies are opt-in: set individual policies to enforce them.

Type:

```hcl
object({
    block_wildcard_ip              = optional(bool, false)
    require_maintenance_window     = optional(bool, false)
    cluster_tier_limits            = optional(object({ min = optional(string), max = optional(string) }))
    allowed_cloud_providers        = optional(list(string))
    allowed_regions                = optional(list(string))
    restrict_private_endpoint_mods = optional(bool)
    restrict_vpc_peering_mods      = optional(bool)
    restrict_ip_access_list_mods   = optional(bool)
    tls_ciphers                    = optional(list(string))
  })
```

Default: `null`

### <a name="input_role_names"></a> [role\_names](#input\_role\_names)

Description: Roles for the initial programmatic API key (for example, ["ORG\_OWNER"]). Required for new organizations, ignored on import.

Type: `list(string)`

Default: `null`

### <a name="input_skip_default_alerts_settings"></a> [skip\_default\_alerts\_settings](#input\_skip\_default\_alerts\_settings)

Description: Skip creation of default alert settings when creating the organization. When null, Atlas applies its own default (false), meaning default org-level alerts are created. See: https://www.mongodb.com/docs/api/doc/atlas-admin-api-v2/operation/operation-createorg

Type: `bool`

Default: `null`
<!-- END_TF_INPUTS_RAW -->

## Outputs

The following outputs are exported:

### <a name="output_client_id"></a> [client\_id](#output\_client\_id)

Description: Client ID of the service account created with the organization. Requires provider support from CLOUDP-379374.

### <a name="output_client_secret"></a> [client\_secret](#output\_client\_secret)

Description: Client secret of the service account created with the organization. Requires provider support from CLOUDP-379374.

### <a name="output_org_id"></a> [org\_id](#output\_org\_id)

Description: The ID of the created organization.

### <a name="output_private_key"></a> [private\_key](#output\_private\_key)

Description: Private key of the programmatic API key created with the organization.

### <a name="output_public_key"></a> [public\_key](#output\_public\_key)

Description: Public key of the programmatic API key created with the organization.

### <a name="output_resource_policy_ids"></a> [resource\_policy\_ids](#output\_resource\_policy\_ids)

Description: Map of resource policy names to their IDs. Empty when resource\_policies is not set.
<!-- END_TF_DOCS -->
